<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<meta name="author" content="Eric Wendelin">
<title>Building Kotlin JVM Libraries</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<link rel="stylesheet" href="https://guides.gradle.org/css/asciidoctor.css">
<link rel="stylesheet" href="https://guides.gradle.org/css/styles.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Source+Code+Pro:500">
<link rel="apple-touch-icon" sizes="180x180" href="https://guides.gradle.org/icon/apple-touch-icon.png">
<link rel="icon" type="image/png" href="https://guides.gradle.org/icon/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://guides.gradle.org/icon/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://guides.gradle.org/icon/manifest.json">
<link rel="mask-icon" href="https://guides.gradle.org/icon/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="https://guides.gradle.org/icon/favicon.ico">
<meta name="apple-mobile-web-app-title" content="building-kotlin-jvm-libraries">
<meta name="application-name" content="building-kotlin-jvm-libraries">
<meta name="msapplication-config" content="https://guides.gradle.org/icon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<script defer src="https://guides.gradle.org/js/set-time-to-complete-text.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,"script","https://www.google-analytics.com/analytics.js","ga");
  ga("create", "UA-4207603-1", "auto");
  ga("send", "pageview");
</script>
</head>
<body class="article toc2 toc-right">
<div id="header"><div style="padding-top: 10px;"><a href="https://guides.gradle.org"><img src="https://guides.gradle.org/gradle-guides.svg" alt=""></a></div><h1>Building Kotlin JVM Libraries</h1>
<div class="details">
<span id="author" class="author">Eric Wendelin</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#what_you_ll_build">What you’ll build</a></li>
<li><a href="#what_you_ll_need">What you’ll need</a></li>
<li><a href="#step_1_bootstrap_kotlin_project">Step 1: Bootstrap Kotlin project</a></li>
<li><a href="#step_2_add_testing_with_junit">Step 2: Add testing with JUnit</a></li>
<li><a href="#step_3_add_docs_with_dokka">Step 3: Add docs with Dokka</a></li>
<li><a href="#step_4_publish_to_local_repo">Step 4: Publish to local repo</a></li>
<li><a href="#next_steps">Next Steps</a></li>
<li><a href="#help_improve_this_guide">Help improve this guide</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide demonstrates how to create a <a href="https://kotlinlang.org">Kotlin</a> library targeted for the JVM. We will use <a href="https://github.com/gradle/kotlin-dsl">Gradle&#8217;s Kotlin DSL</a> for build scripts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_you_ll_build"><a class="anchor" href="#what_you_ll_build"></a>What you’ll build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll create a Kotlin library with the conventional layout, add a test to verify behavior, generate documentation, and publish the library with docs and sources.</p>
</div>
<div class="paragraph">
<p>If you get stuck at any point, you can check out <a href="https://github.com/gradle-guides/building-kotlin-jvm-libraries/tree/master/samples/code/my-kotlin-library">the completed example</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_you_ll_need"><a class="anchor" href="#what_you_ll_need"></a>What you’ll need</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>About <span class="time-to-complete-text"></span></p>
</li>
<li>
<p>A text editor or IDE</p>
</li>
<li>
<p>A <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit</a> (JDK), version 1.7 or better</p>
</li>
<li>
<p>A <a href="https://gradle.org/install">Gradle distribution</a>, version 4.1 or better</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step_1_bootstrap_kotlin_project"><a class="anchor" href="#step_1_bootstrap_kotlin_project"></a>Step 1: Bootstrap Kotlin project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s develop the simplest of libraries with just one API class and method.</p>
</div>
<div class="sect2">
<h3 id="step_1_1_create_project_directory"><a class="anchor" href="#step_1_1_create_project_directory"></a>Step 1.1 Create project directory</h3>
<div class="paragraph">
<p>This is the conventional layout for a Kotlin project. Luckily, Gradle is flexible and would allow us to easily change it by <a href="https://kotlinlang.org/docs/reference/using-gradle.html#targeting-the-jvm">adjusting the <code>sourceSets {}</code></a>. We won&#8217;t worry about that today, though.</p>
</div>
<div class="listingblock">
<div class="title">Kotlin project structure</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">my-kotlin-library
├── build.gradle.kts
└── src
    ├── main
    │   └── kotlin
    │       └── org
    │           └── example
    │               └── MyLibrary.kt
    └── test
        └── kotlin
            └── org
                └── example
                    └── MyLibraryTest.kt</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first step is to create a folder for the new project and change directory into it. In a *nix shell this would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ mkdir -p my-kotlin-library/src/main/kotlin/org/example
$ cd my-kotlin-library</code></pre>
</div>
</div>
<div class="paragraph">
<p>In our new directory we add our library class called <code>MyLibrary</code> that returns a value object <code>Language</code>.</p>
</div>
<div class="listingblock">
<div class="title">src/main/kotlin/org/example/MyLibrary.kt</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">package org.example

/**
 * The `Language` type defines a programming language with a name and hotness score.
 *
 * @property name The name of the language.
 * @property hotness A score from 1 to 10 of user enthusiasm. 10 = so hot right now
 */
data class Language(val name: String, val hotness: Int)

class MyLibrary {
    /**
     * @return data relating to the Kotlin language.
     * @see Language
     */
    fun kotlinLanguage() = Language(&quot;Kotlin&quot;, 10)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the following simple build script we can compile our new Kotlin library.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">import org.gradle.kotlin.dsl.*

plugins {
    kotlin(&quot;jvm&quot;) version &quot;1.1.4-3&quot; <i class="conum" data-value="1"></i><b>(1)</b>
}

repositories {
    jcenter() <i class="conum" data-value="2"></i><b>(2)</b>
}

dependencies {
    implementation(kotlin(&quot;stdlib&quot;)) <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Apply the Kotlin plugin, targeting the Java VM</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare a <a href="https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.dsl.RepositoryHandler.html">dependency repository</a> on Bintray jcenter</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Declare a dependency on the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/index.html">Kotlin standard library</a></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You&#8217;ll notice that we&#8217;re using the new <code>implementation</code> dependency configuration. We&#8217;re declaring that we do not expose any of the Kotlin standard library through our API. This has <a href="https://blog.gradle.org/incremental-compiler-avoidance">architectural and performance benefits</a>.</p>
</div>
<div class="paragraph">
<p>We&#8217;re nearly ready to start testing and packaging our software.</p>
</div>
</div>
<div class="sect2">
<h3 id="step_1_2_digging_deeper_with_a_build_scan"><a class="anchor" href="#step_1_2_digging_deeper_with_a_build_scan"></a>Step 1.2: Digging deeper with a build scan</h3>
<div class="paragraph">
<p>This is not strictly required to complete this guide, but using the <a href="https://gradle.com/build-scans#what-are-build-scans">build scan plugin</a> will be very helpful with understanding what is happening with our builds.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="diff"><span class="line comment">plugins {</span>
<span class="line insert"><span class="insert">+</span>    `build-scan` </span><i class="conum" data-value="1"></i><b>(1)</b>
     kotlin(&quot;jvm&quot;) version &quot;1.1.4-3&quot;
<span class="line comment">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Apply the build scan plugin in the <code>plugins {}</code> block at the top.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add the following build scan configuration below.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">buildScan {
    setLicenseAgreementUrl(&quot;https://gradle.com/terms-of-service&quot;) <i class="conum" data-value="1"></i><b>(1)</b>
    setLicenseAgree(&quot;yes&quot;)

    publishAlways() <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We will never share your build information, but it&#8217;s important to read and agree to build scan <a href="https://gradle.com/terms-of-service">terms of service</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configure build scan plugin to create a build scan after all builds.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we can compile our project.</p>
</div>
<div class="listingblock">
<div class="title">Compile Kotlin sources</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ gradle compileKotlin

&gt; Task :compileKotlin
Using kotlin incremental compilation


BUILD SUCCESSFUL in 16s
1 actionable task: 1 executed

Publishing build scan...
https://gradle.com/s/vah36msduhfiu</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, it is important to know that the Kotlin plugin applies Gradle&#8217;s Java plugin under the covers (we can see this in the "Plugins" section of the build scan). If we look at the <a href="https://docs.gradle.org/4.1/userguide/java_plugin.html">docs for the Java plugin</a>, we learn about all of the conventions it applies for things like Javadocs and packaging we&#8217;ll do later in this guide.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/build-scan-plugins.png" alt="build scan plugins">
</div>
</div>
<div class="paragraph">
<p>Think of a build scan like a web-based, detailed build report. Super handy for digging into build failures or dependency issues. Let&#8217;s move on.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step_2_add_testing_with_junit"><a class="anchor" href="#step_2_add_testing_with_junit"></a>Step 2: Add testing with JUnit</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://junit.org/junit4/">JUnit 4</a> is the simplest of testing libraries to add to our project. If you happen to prefer the <a href="http://spekframework.org/">Spek framework</a> for Kotlin-based specifications, check out the <a href="http://spekframework.org/docs/latest/#_gradle_kotlin_script">Spek docs</a>.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="diff"><span class="line comment">dependencies {</span>
     implementation(kotlin(&quot;stdlib&quot;))
<span class="line insert"><span class="insert">+</span>    testImplementation(&quot;junit:junit:4.12&quot;) </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="line comment">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add test implementation dependency on JUnit</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we are ready to add tests for our library. We will follow the Kotlin plugin conventions and put them under <code>src/test/kotlin</code>.</p>
</div>
<div class="listingblock">
<div class="title">src/test/kotlin/org/example/MyLbraryTest.kt</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">package org.example

import org.junit.Assert.assertEquals
import org.junit.Test

class MyLibraryTest {
    @Test fun testMyLanguage() {
        assertEquals(&quot;Kotlin&quot;, MyLibrary().kotlinLanguage().name)
        assertEquals(10, MyLibrary().kotlinLanguage().hotness)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nothing unexpected here. Now let&#8217;s run them.</p>
</div>
<div class="listingblock">
<div class="title">Execute tests</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ gradle test

&gt; Task :compileKotlin
Using kotlin incremental compilation

&gt; Task :compileTestKotlin
Using kotlin incremental compilation


BUILD SUCCESSFUL in 5s
3 actionable tasks: 3 executed

Publishing build scan...
https://gradle.com/s/hxz67nlm3lejk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Boom. Tests.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step_3_add_docs_with_dokka"><a class="anchor" href="#step_3_add_docs_with_dokka"></a>Step 3: Add docs with Dokka</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A library isn&#8217;t done until it&#8217;s documented. <a href="https://github.com/Kotlin/dokka">Dokka</a> is a popular documentation engine for Kotlin projects. Let&#8217;s use it.</p>
</div>
<div class="sect2">
<h3 id="step_3_1_apply_the_dokka_plugin"><a class="anchor" href="#step_3_1_apply_the_dokka_plugin"></a>Step 3.1: Apply the Dokka plugin</h3>
<div class="paragraph">
<p>The Dokka Gradle plugin cannot be resolved from the Gradle Plugin Portal as of v0.9.15, so we will use a <code>buildscript {}</code> block to apply the plugin to the build script classpath, and then apply it.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">// Using buildscript {} instead of plugins {} due to https://github.com/Kotlin/dokka/issues/146
buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath(&quot;org.jetbrains.dokka:dokka-gradle-plugin:0.9.15&quot;)
    }
}
apply {
    plugin(&quot;org.jetbrains.dokka&quot;)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step_3_2_configure_dokka_plugin"><a class="anchor" href="#step_3_2_configure_dokka_plugin"></a>Step 3.2: Configure Dokka plugin</h3>
<div class="paragraph">
<p>Now we can add configuration down below in our build script.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val dokka by tasks.getting(org.jetbrains.dokka.gradle.DokkaTask::class) {    <i class="conum" data-value="1"></i><b>(1)</b>
    outputFormat = &quot;html&quot;
    outputDirectory = &quot;$buildDir/javadoc&quot;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Configure existing Dokka task to output HTML to typical Javadoc directory</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are many more configuration options available for Dokka, documented <a href="https://github.com/Kotlin/dokka#using-dokka">here</a>, but this gets the job done for us right now. Let&#8217;s run it.</p>
</div>
<div class="listingblock">
<div class="title">Generate docs with Dokka</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ gradle dokka

&gt; Task :dokka
No documentation for org.example.MyLibrary (MyLibrary.kt:11)
No documentation for org.example.MyLibrary$&lt;init&gt;() (MyLibrary.kt:11)


BUILD SUCCESSFUL in 8s
1 actionable task: 1 executed

Publishing build scan...
https://gradle.com/s/buf6pl5vrjqt4</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dokka complains that we didn&#8217;t document absolutely everything, but there&#8217;s enough to get this if we open up <code>$PROJECT_DIR/build/javadoc/my-kotlin-library/index.html</code>. Click on the <code>Language</code> type and you should see our nice documentation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/dokka.png" alt="dokka">
</div>
</div>
</div>
<div class="sect2">
<h3 id="step_3_3_generate_javadoc_jar"><a class="anchor" href="#step_3_3_generate_javadoc_jar"></a>Step 3.3: Generate javadoc JAR</h3>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">import org.gradle.api.plugins.JavaBasePlugin
import org.gradle.jvm.tasks.Jar

val dokkaJar by tasks.creating(Jar::class) { <i class="conum" data-value="1"></i><b>(1)</b>
    group = JavaBasePlugin.DOCUMENTATION_GROUP
    description = &quot;Assembles Kotlin docs with Dokka&quot;
    classifier = &quot;javadoc&quot;
    from(dokka) <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create dokka Jar task from dokka task output</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>dependsOn(dokka)</code> not needed; dependency automatically inferred by from(dokka)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Try running <code>gradle dokkaJar</code> and see if you can find the javadoc JAR based on what you know so far.</p>
</div>
<div class="paragraph">
<p>We could optionally also generate a <code>"sources"</code> JAR using the same pattern from <code>java.sourceSets.getByName("main").allSource</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step_4_publish_to_local_repo"><a class="anchor" href="#step_4_publish_to_local_repo"></a>Step 4: Publish to local repo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now our library is ready to share with the world. We&#8217;re going to publish it locally with the <a href="https://docs.gradle.org/4.1/userguide/publishing_maven.html">maven-publish plugin</a> just to keep things simple, but another popular choice is the <a href="https://plugins.gradle.org/plugin/com.jfrog.bintray">Gradle Bintray Plugin</a>. Their documentation has <a href="https://github.com/bintray/bintray-examples/tree/master/gradle-bintray-plugin-examples">several samples</a> you can use if you&#8217;re interested.</p>
</div>
<div class="sect2">
<h3 id="step_4_1_apply_the_maven_publish_plugin"><a class="anchor" href="#step_4_1_apply_the_maven_publish_plugin"></a>Step 4.1: Apply the maven-publish plugin</h3>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="diff"><span class="line comment">plugins {</span>
     `build-scan`
<span class="line insert"><span class="insert">+</span>    `maven-publish`</span>
     kotlin(&quot;jvm&quot;) version &quot;1.1.4-3&quot;
<span class="line comment">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step_4_2_set_project_coordinates"><a class="anchor" href="#step_4_2_set_project_coordinates"></a>Step 4.2: Set project coordinates</h3>
<div class="paragraph">
<p>We need to set coordinates in our build script for publishing.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">group = &quot;org.example&quot; <i class="conum" data-value="1"></i><b>(1)</b>
version = &quot;0.0.1&quot;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Configure project coordinates to <code>org.example:my-kotlin-library:0.0.1</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The project name is set by the root project directory name by default, but it is best practice to make it explicit. This is done in a <code>settings.gradle</code> file at the project root.</p>
</div>
<div class="listingblock">
<div class="title">settings.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">rootProject.name = <span class="string"><span class="delimiter">'</span><span class="content">my-kotlin-library</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step_4_3_configure_maven_publication"><a class="anchor" href="#step_4_3_configure_maven_publication"></a>Step 4.3: Configure Maven publication</h3>
<div class="paragraph">
<p>For the <code>maven-publish</code> plugin to have any effect, a <a href="https://docs.gradle.org/current/dsl/org.gradle.api.publish.maven.MavenPublication.html">MavenPublication</a> must be added to the set of publications. This publication determines which artifacts are actually published as well as the details included in the associated POM file.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">import org.gradle.api.publish.maven.MavenPublication

publishing {
    publications {
        create(&quot;default&quot;, MavenPublication::class.java) { <i class="conum" data-value="1"></i><b>(1)</b>
            from(components.getByName(&quot;java&quot;))
            artifact(dokkaJar) <i class="conum" data-value="2"></i><b>(2)</b>
        }
    }
    repositories {
        maven {
            url = uri(&quot;$buildDir/repository&quot;) <i class="conum" data-value="3"></i><b>(3)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a Maven publication called "default" from the "java" component</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare the javadoc JAR from Dokka as an artifact</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Declare a local Maven repository under the <code>build/</code> directory</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we are ready to <code>publish</code>!</p>
</div>
<div class="listingblock">
<div class="title">Publish to local repository</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">$ gradle publish

&gt; Task :dokka
No documentation for org.example.MyLibrary (MyLibrary.kt:11)
No documentation for org.example.MyLibrary$&lt;init&gt;() (MyLibrary.kt:11)

&gt; Task :compileKotlin
Using kotlin incremental compilation

Could not find metadata org.example:my-kotlin-library/maven-metadata.xml in remote (file:$PROJECT_DIR/build/repository)

BUILD SUCCESSFUL in 4s
7 actionable tasks: 7 executed

Publishing build scan...
https://gradle.com/s/ideifb3epyoz6</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your Maven repository should now have the published artifacts.</p>
</div>
<div class="listingblock">
<div class="title">Local Maven repository</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">build/repository
└── org
    └── example
        └── my-kotlin-library
            ├── 0.0.1
            │   ├── my-kotlin-library-0.0.1-javadoc.jar
            │   ├── my-kotlin-library-0.0.1-javadoc.jar.md5
            │   ├── my-kotlin-library-0.0.1-javadoc.jar.sha1
            │   ├── my-kotlin-library-0.0.1.jar
            │   ├── my-kotlin-library-0.0.1.jar.md5
            │   ├── my-kotlin-library-0.0.1.jar.sha1
            │   ├── my-kotlin-library-0.0.1.pom
            │   ├── my-kotlin-library-0.0.1.pom.md5
            │   └── my-kotlin-library-0.0.1.pom.sha1
            ├── maven-metadata.xml
            ├── maven-metadata.xml.md5
            └── maven-metadata.xml.sha1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations! You&#8217;ve successfully built a Kotlin library, tested it, documented it, and packaged it as a JAR with docs and sources. The <a href="https://github.com/gradle-guides/building-kotlin-jvm-libraries/tree/master/samples/code/my-kotlin-library">complete sample project is on GitHub</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next_steps"><a class="anchor" href="#next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We hope you found this fun and enlightening. Let us know what you thought of this guide via <a href="https://twitter.com/gradle">@gradle on Twitter</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can learn more about the <a href="https://kotlinlang.org/docs/reference/using-gradle.html">Gradle Kotlin Plugin with the official docs</a>.</p>
</li>
<li>
<p>JetBrains has developed a series of <a href="https://github.com/JetBrains/kotlin-examples">Kotlin example projects</a> the demonstrate working with Kotlin and Gradle, including <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/dokka-gradle-example">one for advanced Dokka usage</a>.</p>
</li>
<li>
<p>There are lots of <a href="https://github.com/gradle/kotlin-dsl/tree/master/samples">Kotlin DSL samples</a> available in the gradle/kotlin-dsl repository on GitHub, as well as additional <a href="https://github.com/gradle/kotlin-dsl/tree/master/doc/getting-started">getting started docs</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1 contribute">
<h2 id="help_improve_this_guide"><a class="anchor" href="#help_improve_this_guide"></a>Help improve this guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Have feedback or a question? Found a typo? Like all Gradle guides, help is just a GitHub issue away. Please add an issue or pull request to <a href="https://github.com/gradle-guides/building-kotlin-jvm-libraries/">gradle-guides/building-kotlin-jvm-libraries</a> and we&#8217;ll get back to you.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-09-11 13:02:04 +00:00
</div>
</div>
</body>
</html>